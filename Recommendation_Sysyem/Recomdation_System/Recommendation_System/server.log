2024-07-14 18:43:08,734 - root - INFO - Server started on localhost:12346
2024-07-14 18:45:46,751 - root - DEBUG - Received request: {"action": "login", "employee_id": "chef1", "password": "password123"}
2024-07-14 18:45:46,804 - root - DEBUG - Sending response: {"status": "success", "role": "Chef", "user_id": 2}
2024-07-14 18:45:50,047 - root - DEBUG - Received request: {"action": "view_menu"}
2024-07-14 18:45:50,070 - root - DEBUG - Sending response: {"status": "success", "menu": [{"id": 1, "name": "Poha", "price": "50.00", "average_rating": "4.5", "availability": "yes", "dietary_category": "Vegetarian", "spice_level": "Low", "is_sweet": 0}, {"id": 2, "name": "Boiled Eggs", "price": "30.00", "average_rating": "4.0", "availability": "yes", "dietary_category": "Eggetarian", "spice_level": "Low", "is_sweet": 0}, {"id": 3, "name": "Sandwich", "price": "60.00", "average_rating": "4.2", "availability": "yes", "dietary_category": "Vegetarian", "spice_level": "Medium", "is_sweet": 0}, {"id": 4, "name": "Aloo Paratha", "price": "80.00", "average_rating": "4.7", "availability": "yes", "dietary_category": "Vegetarian", "spice_level": "High", "is_sweet": 0}, {"id": 5, "name": "Chicken Biryani", "price": "150.00", "average_rating": "4.8", "availability": "yes", "dietary_category": "Non Vegetarian", "spice_level": "High", "is_sweet": 0}, {"id": 6, "name": "Gulab Jamun", "price": "40.00", "average_rating": "4.9", "availability": "yes", "dietary_category": "Vegetarian", "spice_level": "Low", "is_sweet": 1}]}
2024-07-14 18:46:01,815 - root - DEBUG - Received request: {"action": "get_recommendations", "role": 2}
2024-07-14 18:46:01,815 - root - ERROR - Error in get_recommendations: 'user_id'
2024-07-14 18:46:01,815 - root - DEBUG - Sending response: {"status": "error", "message": "Failed to get recommendations"}
2024-07-14 18:50:34,836 - root - INFO - Server started on localhost:12346
2024-07-14 18:50:48,140 - root - DEBUG - Received request: {"action": "login", "employee_id": "chef1", "password": "password123"}
2024-07-14 18:50:48,156 - root - DEBUG - Sending response: {"status": "success", "role": "Chef", "user_id": 2}
2024-07-14 18:50:50,121 - root - DEBUG - Received request: {"action": "get_recommendations", "role": 2}
2024-07-14 18:50:50,121 - root - ERROR - Error in get_recommendations: 'user_id'
2024-07-14 18:50:50,121 - root - DEBUG - Sending response: {"status": "error", "message": "Failed to get recommendations"}
2024-07-14 18:57:44,555 - root - INFO - Server started on localhost:12346
2024-07-14 18:57:55,037 - root - DEBUG - Received request: {"action": "login", "employee_id": "chef1", "password": "password123"}
2024-07-14 18:57:55,051 - root - DEBUG - Sending response: {"status": "success", "role": "Chef", "user_id": 2}
2024-07-14 19:03:03,338 - root - INFO - Server started on localhost:12346
2024-07-14 19:03:16,386 - root - DEBUG - Received request: {"action": "login", "employee_id": "chef1", "password": "password123"}
2024-07-14 19:03:16,386 - root - DEBUG - Sending response: {"status": "success", "role": "Chef", "user_id": 2}
2024-07-14 19:03:17,956 - root - DEBUG - Received request: {"action": "get_recommendations", "user_id": 2, "role": 2}
2024-07-14 19:03:17,963 - root - DEBUG - Fetching preferences for user_id=2
2024-07-14 19:03:17,971 - root - DEBUG - User preferences: None
2024-07-14 19:03:17,976 - root - DEBUG - Fetched recommendations: [{'id': 6, 'name': 'Gulab Jamun', 'price': Decimal('40.00'), 'average_rating': Decimal('4.9'), 'dietary_category': 'Vegetarian', 'spice_level': 'Low', 'is_sweet': 1}, {'id': 5, 'name': 'Chicken Biryani', 'price': Decimal('150.00'), 'average_rating': Decimal('4.8'), 'dietary_category': 'Non Vegetarian', 'spice_level': 'High', 'is_sweet': 0}, {'id': 4, 'name': 'Aloo Paratha', 'price': Decimal('80.00'), 'average_rating': Decimal('4.7'), 'dietary_category': 'Vegetarian', 'spice_level': 'High', 'is_sweet': 0}, {'id': 1, 'name': 'Poha', 'price': Decimal('50.00'), 'average_rating': Decimal('4.5'), 'dietary_category': 'Vegetarian', 'spice_level': 'Low', 'is_sweet': 0}, {'id': 3, 'name': 'Sandwich', 'price': Decimal('60.00'), 'average_rating': Decimal('4.2'), 'dietary_category': 'Vegetarian', 'spice_level': 'Medium', 'is_sweet': 0}, {'id': 2, 'name': 'Boiled Eggs', 'price': Decimal('30.00'), 'average_rating': Decimal('4.0'), 'dietary_category': 'Eggetarian', 'spice_level': 'Low', 'is_sweet': 0}]
2024-07-14 19:03:17,976 - root - DEBUG - Sending response: {"status": "success", "recommendations": [{"id": 6, "name": "Gulab Jamun", "price": "40.00", "average_rating": "4.9", "dietary_category": "Vegetarian", "spice_level": "Low", "is_sweet": 1}, {"id": 5, "name": "Chicken Biryani", "price": "150.00", "average_rating": "4.8", "dietary_category": "Non Vegetarian", "spice_level": "High", "is_sweet": 0}, {"id": 4, "name": "Aloo Paratha", "price": "80.00", "average_rating": "4.7", "dietary_category": "Vegetarian", "spice_level": "High", "is_sweet": 0}, {"id": 1, "name": "Poha", "price": "50.00", "average_rating": "4.5", "dietary_category": "Vegetarian", "spice_level": "Low", "is_sweet": 0}, {"id": 3, "name": "Sandwich", "price": "60.00", "average_rating": "4.2", "dietary_category": "Vegetarian", "spice_level": "Medium", "is_sweet": 0}, {"id": 2, "name": "Boiled Eggs", "price": "30.00", "average_rating": "4.0", "dietary_category": "Eggetarian", "spice_level": "Low", "is_sweet": 0}]}
2024-07-14 19:03:41,553 - root - DEBUG - Received request: {"action": "choose_recommendations", "menu_item_ids": [4, 3, 5], "user_id": 2, "role": 2}
2024-07-14 19:03:41,569 - root - DEBUG - Fetched price for menu_item_id 4: 80.00
2024-07-14 19:03:41,609 - root - DEBUG - Inserted rollout item: 4 by user: 2 with price: 80.00 at 2024-07-14 19:03:41.553855
2024-07-14 19:03:41,611 - root - DEBUG - Fetched price for menu_item_id 3: 60.00
2024-07-14 19:03:41,615 - root - DEBUG - Inserted rollout item: 3 by user: 2 with price: 60.00 at 2024-07-14 19:03:41.553855
2024-07-14 19:03:41,617 - root - DEBUG - Fetched price for menu_item_id 5: 150.00
2024-07-14 19:03:41,621 - root - DEBUG - Inserted rollout item: 5 by user: 2 with price: 150.00 at 2024-07-14 19:03:41.553855
2024-07-14 19:03:41,625 - root - DEBUG - Inserting notification for employee 3
2024-07-14 19:03:41,628 - root - DEBUG - Inserting notification for employee 4
2024-07-14 19:03:41,631 - root - DEBUG - Sending response: {"status": "success", "message": "Recommendations chosen"}
2024-07-14 19:03:50,323 - root - DEBUG - Received request: {"action": "view_vote_counts"}
2024-07-14 19:03:50,361 - root - DEBUG - Vote counts fetched: []
2024-07-14 19:03:50,361 - root - DEBUG - Sending response: {"status": "success", "vote_counts": []}
2024-07-14 19:03:59,789 - root - DEBUG - Received request: {"action": "view_discard_list"}
2024-07-14 19:03:59,831 - root - DEBUG - Discard list: []
2024-07-14 19:03:59,831 - root - DEBUG - Sending response: {"status": "success", "discard_list": []}
2024-07-14 19:05:25,824 - root - DEBUG - Received request: {"action": "login", "employee_id": "emp1", "password": "password123"}
2024-07-14 19:05:25,824 - root - DEBUG - Sending response: {"status": "success", "role": "Employee", "user_id": 3}
2024-07-14 19:05:31,055 - root - DEBUG - Received request: {"action": "view_notifications", "user_id": 3, "role": 3}
2024-07-14 19:05:31,055 - root - DEBUG - Fetched notifications for user 3: [{'id': 29, 'user_id': 3, 'message': 'New rollout items available. Please vote for your preferred items.', 'viewed': 0, 'timestamp': datetime.datetime(2024, 7, 14, 19, 3, 41)}]
2024-07-14 19:05:31,073 - root - DEBUG - Marked notifications as viewed for user 3
2024-07-14 19:05:31,075 - root - DEBUG - Fetched rollout items: [{'menu_item_id': 4, 'name': 'Aloo Paratha', 'dietary_category': 'Vegetarian', 'spice_level': 'High', 'is_sweet': 0, 'average_rating': Decimal('4.7'), 'price': Decimal('80.00'), 'timestamp': datetime.datetime(2024, 7, 14, 19, 3, 42)}, {'menu_item_id': 3, 'name': 'Sandwich', 'dietary_category': 'Vegetarian', 'spice_level': 'Medium', 'is_sweet': 0, 'average_rating': Decimal('4.2'), 'price': Decimal('60.00'), 'timestamp': datetime.datetime(2024, 7, 14, 19, 3, 42)}, {'menu_item_id': 5, 'name': 'Chicken Biryani', 'dietary_category': 'Non Vegetarian', 'spice_level': 'High', 'is_sweet': 0, 'average_rating': Decimal('4.8'), 'price': Decimal('150.00'), 'timestamp': datetime.datetime(2024, 7, 14, 19, 3, 42)}]
2024-07-14 19:05:31,076 - root - DEBUG - Sending response: {"status": "success", "notifications": [{"id": 29, "user_id": 3, "message": "New rollout items available. Please vote for your preferred items.", "viewed": 0, "timestamp": "2024-07-14T19:03:41"}], "rollout_items": [{"menu_item_id": 3, "name": "Sandwich", "dietary_category": "Vegetarian", "spice_level": "Medium", "is_sweet": 0, "average_rating": "4.2", "price": "60.00", "timestamp": "2024-07-14T19:03:42"}, {"menu_item_id": 4, "name": "Aloo Paratha", "dietary_category": "Vegetarian", "spice_level": "High", "is_sweet": 0, "average_rating": "4.7", "price": "80.00", "timestamp": "2024-07-14T19:03:42"}, {"menu_item_id": 5, "name": "Chicken Biryani", "dietary_category": "Non Vegetarian", "spice_level": "High", "is_sweet": 0, "average_rating": "4.8", "price": "150.00", "timestamp": "2024-07-14T19:03:42"}]}
2024-07-14 19:10:16,226 - root - DEBUG - Received request: {"action": "vote_for_menu_item", "dish_id": 3, "meal_type": "breakfast", "user_id": 3, "role": 3}
2024-07-14 19:10:16,248 - root - DEBUG - Sending response: {"status": "success", "message": "Vote submitted"}
2024-07-14 19:10:30,626 - root - DEBUG - Received request: {"action": "view_vote_counts"}
2024-07-14 19:10:30,626 - root - DEBUG - Vote counts fetched: [{'name': 'Sandwich', 'meal_type': 'breakfast', 'vote_count': 1}]
2024-07-14 19:10:30,626 - root - DEBUG - Sending response: {"status": "success", "vote_counts": [{"name": "Sandwich", "meal_type": "breakfast", "vote_count": 1}]}
2024-07-15 08:17:01,748 - root - DEBUG - Received request: {"action": "send_feedback", "user_id": 2, "comment": "vert bad in taste", "item_id": 6, "role": 2}
2024-07-15 08:17:01,748 - root - DEBUG - Analyzing feedback: user_id=2, comment='vert bad in taste', sentiment='negative', item_id=6
2024-07-15 08:17:01,763 - root - DEBUG - Feedback counts for item_id 6: [{'sentiment': 'negative', 'count': 1}]
2024-07-15 08:17:01,763 - root - DEBUG - Computed average rating for menu_item_id 6: 1.0
2024-07-15 08:17:01,769 - root - DEBUG - Updated average rating for menu_item_id 6 to 1.0
2024-07-15 08:17:01,772 - root - DEBUG - Inserted feedback for menu_item_id 6: vert bad in taste
2024-07-15 08:17:01,772 - root - DEBUG - Sending response: {"status": "success", "message": "Feedback sended"}
2024-07-15 08:17:32,605 - root - DEBUG - Received request: {"action": "submit_feedback", "user_id": 3, "comment": "very bad taste", "item_id": 6, "role": 3}
2024-07-15 08:17:32,605 - root - DEBUG - Analyzing feedback: user_id=3, comment='very bad taste', sentiment='negative', item_id=6
2024-07-15 08:17:32,605 - root - DEBUG - Feedback counts for item_id 6: [{'sentiment': 'negative', 'count': 2}]
2024-07-15 08:17:32,605 - root - DEBUG - Computed average rating for menu_item_id 6: 1.0
2024-07-15 08:17:32,620 - root - DEBUG - Updated average rating for menu_item_id 6 to 1.0
2024-07-15 08:17:32,620 - root - DEBUG - Inserted feedback for menu_item_id 6: very bad taste
2024-07-15 08:17:32,620 - root - DEBUG - Sending response: {"status": "success", "message": "Feedback submited"}
2024-07-15 08:17:41,370 - root - DEBUG - Received request: {"action": "get_recommendations", "user_id": 2, "role": 2}
2024-07-15 08:17:41,370 - root - DEBUG - Fetching preferences for user_id=2
2024-07-15 08:17:41,386 - root - DEBUG - User preferences: None
2024-07-15 08:17:41,387 - root - DEBUG - Fetched recommendations: [{'id': 5, 'name': 'Chicken Biryani', 'price': Decimal('150.00'), 'average_rating': Decimal('4.8'), 'dietary_category': 'Non Vegetarian', 'spice_level': 'High', 'is_sweet': 0}, {'id': 4, 'name': 'Aloo Paratha', 'price': Decimal('80.00'), 'average_rating': Decimal('4.7'), 'dietary_category': 'Vegetarian', 'spice_level': 'High', 'is_sweet': 0}, {'id': 1, 'name': 'Poha', 'price': Decimal('50.00'), 'average_rating': Decimal('4.5'), 'dietary_category': 'Vegetarian', 'spice_level': 'Low', 'is_sweet': 0}, {'id': 3, 'name': 'Sandwich', 'price': Decimal('60.00'), 'average_rating': Decimal('4.2'), 'dietary_category': 'Vegetarian', 'spice_level': 'Medium', 'is_sweet': 0}, {'id': 2, 'name': 'Boiled Eggs', 'price': Decimal('30.00'), 'average_rating': Decimal('4.0'), 'dietary_category': 'Eggetarian', 'spice_level': 'Low', 'is_sweet': 0}, {'id': 6, 'name': 'Gulab Jamun', 'price': Decimal('40.00'), 'average_rating': Decimal('1.0'), 'dietary_category': 'Vegetarian', 'spice_level': 'Low', 'is_sweet': 1}]
2024-07-15 08:17:41,387 - root - DEBUG - Sending response: {"status": "success", "recommendations": [{"id": 5, "name": "Chicken Biryani", "price": "150.00", "average_rating": "4.8", "dietary_category": "Non Vegetarian", "spice_level": "High", "is_sweet": 0}, {"id": 4, "name": "Aloo Paratha", "price": "80.00", "average_rating": "4.7", "dietary_category": "Vegetarian", "spice_level": "High", "is_sweet": 0}, {"id": 1, "name": "Poha", "price": "50.00", "average_rating": "4.5", "dietary_category": "Vegetarian", "spice_level": "Low", "is_sweet": 0}, {"id": 3, "name": "Sandwich", "price": "60.00", "average_rating": "4.2", "dietary_category": "Vegetarian", "spice_level": "Medium", "is_sweet": 0}, {"id": 2, "name": "Boiled Eggs", "price": "30.00", "average_rating": "4.0", "dietary_category": "Eggetarian", "spice_level": "Low", "is_sweet": 0}, {"id": 6, "name": "Gulab Jamun", "price": "40.00", "average_rating": "1.0", "dietary_category": "Vegetarian", "spice_level": "Low", "is_sweet": 1}]}
2024-07-15 08:17:50,654 - root - DEBUG - Received request: {"action": "view_discard_list"}
2024-07-15 08:17:50,670 - root - DEBUG - Discard list: [{'id': 6, 'name': 'Gulab Jamun', 'average_rating': Decimal('1.0'), 'sentiments': 'bad, bad taste'}]
2024-07-15 08:17:50,670 - root - DEBUG - Sending response: {"status": "success", "discard_list": [{"id": 6, "name": "Gulab Jamun", "average_rating": "1.0", "sentiments": "bad, bad taste"}]}
